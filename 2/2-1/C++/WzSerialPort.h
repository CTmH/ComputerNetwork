#pragma once
#ifndef _WZSERIALPORT_H
#define _WZSERIALPORT_H

/*
	?????????
	?????2017-12-14
	??????WZSerialPort
	??????????§Õ
	?????
		?¦Ï? main.cpp
*/

class WzSerialPort
{
public:
	WzSerialPort();
	~WzSerialPort();

	// ?????,???????true????????false
	// portname(??????): ??Windows????"COM1""COM2"?????Linux????"/dev/ttyS1"??
	// baudrate(??????): 9600??19200??38400??43000??56000??57600??115200 
	// parity(§µ??¦Ë): 0???§µ?ï…1???§µ?ï…2??§µ?ï…3????§µ?÷Ï????????windows)
	// databit(????¦Ë): 4-8(windows),5-8(linux)??????8¦Ë
	// stopbit(??¦Ë): 1?1¦Ë??¦Ë??2?2¦Ë??¦Ë,3?1.5¦Ë??¦Ë
	// synchronizeflag(???????,????????windows): 0?????1????
	bool open(const char* portname, int baudrate, char parity, char databit, char stopbit);

	//???????????????
	void close();

	//?????????§Õ?????????????????????????????0
	int send(const void* buf, int len);

	//??????????????????????????????????????????0
	int receive(void* buf, int maxlen);

private:
	int pHandle[16];
	char synchronizeflag;
};

#endif